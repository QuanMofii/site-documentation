{{- $version := .Get "version" | default "" -}}
{{- $icon := .Get "icon" | default "" -}}
{{- $projectGithub := site.Params.project.github | default "https://github.com/{author}/{project_name}" -}}
{{- $defaultLink := cond (eq $version "") (printf "%s/tree/main" $projectGithub) (printf "%s/releases/tag/%s" $projectGithub $version) -}}
{{- $link := .Get "link" | default $defaultLink -}}
{{- $content := cond (eq $version "") "New in main branch" (printf "New in %s" $version) -}}

<div style="margin-top: 1rem; display: inline-flex;">
  <a href="{{ $link }}" title="{{ $link | plainify }}" target="_blank">
    {{- partial "shortcodes/badge" (dict "content" $content "border" true "icon" $icon) -}}
  </a>
</div>
